(function(a){a(function(){var d='';d+='<div class="coderockz-woo-delivery-loading-image">',d+='<div class="coderockz-woo-delivery-loading-gif">',d+='<img src="'+a('#coderockz_woo_delivery_setting_wrapper').data('plugin-url')+'public/images/loading.gif" alt="" />',d+='</div>',d+='</div>',a('#coderockz_woo_delivery_setting_wrapper').append(d),a('#coderockz_woo_delivery_time_field').selectWoo({allowClear:!0}),p=new Date();var o=a('#coderockz_woo_delivery_date_datepicker').data('selectable_dates');var r=a('#coderockz_woo_delivery_date_datepicker').data('date_format');if(typeof a('#coderockz_woo_delivery_date_datepicker').data('disable_week_days')!==typeof undefined&&a('#coderockz_woo_delivery_date_datepicker').data('disable_week_days')!==!1)var f=a('#coderockz_woo_delivery_date_datepicker').data('disable_week_days');else var f=[];var y=a('#coderockz_woo_delivery_date_datepicker').data('extra_label_text');var s=a('#coderockz_woo_delivery_date_datepicker').data('week_starts_from');var t=a('#coderockz_woo_delivery_date_datepicker').data('default_date');var u=a('#coderockz_woo_delivery_date_datepicker').data('disable_dates');var j=a('#coderockz_woo_delivery_time_field').data('default_time');var e=a('#coderockz_woo_delivery_time_field').data('order_limit_notice');var b=[];for(var k=0;k<o;k++){var c=new Date();var v=c.setDate(c.getDate()+k);var g=new Date(v);var h='0'+(Number(g.getMonth())+1);var p='0'+g.getDate();var i=g.getDay().toString();var q=g.getFullYear()+'-'+h.substr(-2)+'-'+p.substr(-2);f.length!=7?a.inArray(q,u)===-1&&a.inArray(i,f)===-1?b.push(q):o+=1:b.push('0000-00-00');}if(t){var w=b[0].substr(0,4);if(b[0].substr(5,1)=='0')var l=b[0].substr(6,1)-1;else var l=b[0].substr(5,2)-1;if(b[0].substr(8,1)=='0')var m=b[0].substr(9,1);else var m=b[0].substr(8,2);var n=new Date(w,l,m);}else var n='0000-00-00';if(a('#coderockz_woo_delivery_date_datepicker').length)a('#coderockz_woo_delivery_date_datepicker').flatpickr({enable:b,dateFormat:r,defaultDate:n,locale:{firstDayOfWeek:s},onChange:function(l,m,n){a('.coderockz-woo-delivery-loading-image').fadeIn(),a('#coderockz_woo_delivery_time_field').val(''),a('#coderockz_woo_delivery_time_field option').each(function(){var b=a(this).attr('disabled');typeof b!==typeof undefined&&b!==!1&&a(this).attr('disabled',!1);var c=a(this).text();var d=c.indexOf(e);d!==-1&&a(this).text(c.substr(0,d));}),a('#coderockz_woo_delivery_time_field').selectWoo({allowClear:!0});var b=new Date();var g='0'+(b.getMonth()+1);var h='0'+b.getDate();var f=g.substr(-2)+'/'+h.substr(-2)+'/'+b.getFullYear();var c=new Date(l);var i='0'+(c.getMonth()+1);var k='0'+c.getDate();var d=i.substr(-2)+'/'+k.substr(-2)+'/'+c.getFullYear();a.ajax({url:coderockz_woo_delivery_ajax_obj.coderockz_woo_delivery_ajax_url,type:'POST',data:{_ajax_nonce:coderockz_woo_delivery_ajax_obj.nonce,action:'coderockz_woo_delivery_get_orders',date:d},success:function(l){data=JSON.parse(l.data);var c=data.current_time;var g=data.delivery_times;var h=data.max_order_per_slot;var b={};if(g.length>0){for(var i=0;g.length>i;i++)b[g[i]]=(b[g[i]]||0)+1;for(var k in b){if(!b.hasOwnProperty(k))continue;typeof h!==typeof undefined&&h!==!1&&b[k]>=h&&h!=0&&a('#coderockz_woo_delivery_time_field option').each(function(){a(this).val()==k&&(a(this).attr('disabled',!0),a(this).text(a(this).text()+e));});}}d==f&&a('#coderockz_woo_delivery_time_field option').each(function(){var b=a(this).val().split(',');b[0]<=c&&b[1]<=c&&a(this).attr('disabled',!0);}),d==f&&data.disabled_current_time_slot&&a('#coderockz_woo_delivery_time_field option').each(function(){var b=a(this).val().split(',');b[0]<=c&&b[1]>c&&a(this).attr('disabled',!0);}),j&&a('#coderockz_woo_delivery_time_field option').each(function(){return!a(this).is('[disabled=disabled]')&&a(this).val()!=''?(selectedField=a(this).index(),a(this).attr('selected',!0),!1):void 0;}),a('#coderockz_woo_delivery_time_field').selectWoo({allowClear:!0}),a('.coderockz-woo-delivery-loading-image').fadeOut();}});},onReady:function(m,n,g){a('.coderockz-woo-delivery-loading-image').fadeIn(),a('#coderockz_woo_delivery_time_field').val(''),a('#coderockz_woo_delivery_time_field option').each(function(){var b=a(this).attr('disabled');typeof b!==typeof undefined&&b!==!1&&a(this).attr('disabled',!1);var c=a(this).text();var d=c.indexOf(e);d!==-1&&a(this).text(c.substr(0,d));}),a('#coderockz_woo_delivery_time_field').selectWoo({allowClear:!0});var c=new Date();var h='0'+(c.getMonth()+1);var i='0'+c.getDate();var d=h.substr(-2)+'/'+i.substr(-2)+'/'+c.getFullYear();var f=new Date(g.selectedDates[0]);var k='0'+(f.getMonth()+1);var l='0'+f.getDate();if(g.selectedDates.length>0)var b=k.substr(-2)+'/'+l.substr(-2)+'/'+f.getFullYear();else var b=d;a.ajax({url:coderockz_woo_delivery_ajax_obj.coderockz_woo_delivery_ajax_url,type:'POST',data:{_ajax_nonce:coderockz_woo_delivery_ajax_obj.nonce,action:'coderockz_woo_delivery_get_orders',date:b},success:function(l){data=JSON.parse(l.data);var c=data.current_time;var g=data.delivery_times;var h=data.max_order_per_slot;var f={};if(g.length>0){for(var i=0;g.length>i;i++)f[g[i]]=(f[g[i]]||0)+1;for(var k in f){if(!f.hasOwnProperty(k))continue;typeof h!==typeof undefined&&h!==!1&&f[k]>=h&&h!=0&&a('#coderockz_woo_delivery_time_field option').each(function(){a(this).val()==k&&(a(this).attr('disabled',!0),a(this).text(a(this).text()+e));});}}b==d&&a('#coderockz_woo_delivery_time_field option').each(function(){var b=a(this).val().split(',');b[0]<=c&&b[1]<=c&&a(this).attr('disabled',!0);}),b==d&&data.disabled_current_time_slot&&a('#coderockz_woo_delivery_time_field option').each(function(){var b=a(this).val().split(',');b[0]<=c&&b[1]>c&&a(this).attr('disabled',!0);}),(typeof a('#coderockz_woo_delivery_date_datepicker').val()==typeof undefined&&a('#coderockz_woo_delivery_date_datepicker').val()==0||a('#coderockz_woo_delivery_date_datepicker').val()=='')&&a('#coderockz_woo_delivery_time_field option').each(function(){var b=a(this).val().split(',');b[0]<=c&&b[1]<=c&&a(this).attr('disabled',!0);}),j&&a('#coderockz_woo_delivery_time_field option').each(function(){return!a(this).is('[disabled=disabled]')&&a(this).val()!=''?(a(this).attr('selected',!0),!1):void 0;}),a('#coderockz_woo_delivery_time_field').selectWoo({allowClear:!0});}}),a('.coderockz-woo-delivery-loading-image').fadeOut();}});else{var c=new Date();var h='0'+(c.getMonth()+1);var i='0'+c.getDate();var x=h.substr(-2)+'/'+i.substr(-2)+'/'+c.getFullYear();a.ajax({url:coderockz_woo_delivery_ajax_obj.coderockz_woo_delivery_ajax_url,type:'POST',data:{_ajax_nonce:coderockz_woo_delivery_ajax_obj.nonce,action:'coderockz_woo_delivery_get_orders',onlyDeliveryTime:!0,date:x},success:function(i){data=JSON.parse(i.data);var c=data.current_time;var d=data.delivery_times;var f=data.max_order_per_slot;var b={};if(d.length>0){for(var g=0;d.length>g;g++)b[d[g]]=(b[d[g]]||0)+1;for(var h in b){if(!b.hasOwnProperty(h))continue;typeof f!==typeof undefined&&f!==!1&&b[h]>=f&&f!=0&&a('#coderockz_woo_delivery_time_field option').each(function(){a(this).val()==h&&(a(this).attr('disabled',!0),a(this).text(a(this).text()+e));});}}data.disabled_current_time_slot&&a('#coderockz_woo_delivery_time_field option').each(function(){var b=a(this).val().split(',');b[0]<=c&&b[1]>c&&a(this).attr('disabled',!0);}),a('#coderockz_woo_delivery_time_field option').each(function(){var b=a(this).val().split(',');b[0]<=c&&b[1]<=c&&a(this).attr('disabled',!0);}),j&&a('#coderockz_woo_delivery_time_field option').each(function(){return!a(this).is('[disabled=disabled]')&&a(this).val()!=''?(a(this).attr('selected',!0),!1):void 0;}),a('#coderockz_woo_delivery_time_field').selectWoo({allowClear:!0});}});}});}(jQuery));